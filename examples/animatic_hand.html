<!doctype html>
<html lang="en">
  <head>
    <title>Animation of a hand using Animatic</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
   </head>
  <body>

    <script src="../build/three.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <div id="ThreeJS" style="position: absolute; left:0px; top:0px"></div>
    <script>
      // SCENE
      var scene = new THREE.Scene();

      // CAMERA
      var SCREEN_WIDTH = window.innerWidth, SCREEN_HEIGHT = window.innerHeight;
      var VIEW_ANGLE = 45, ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT, NEAR = 0.1, FAR = 20000;
      var camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
      scene.add(camera);
      camera.position.set(0,150,800);
      camera.lookAt(scene.position);	
      
      // RENDERER
      var renderer = new THREE.WebGLRenderer( {antialias:true} );
      renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
      var container = document.getElementById( 'ThreeJS' );
      container.appendChild( renderer.domElement );
      
      // LIGHT
      var light = new THREE.PointLight(0xffffff);
      light.position.set(-100,200,100);
      scene.add(light);
      
      // FLOOR
      var floorTexture = new THREE.ImageUtils.loadTexture('textures/crate.gif');
      floorTexture.wrapS = floorTexture.wrapT = THREE.RepeatWrapping; 
      floorTexture.repeat.set( 10, 10 );
      var floorMaterial = new THREE.MeshBasicMaterial( { map: floorTexture, side: THREE.DoubleSide } );
      var floorGeometry = new THREE.PlaneGeometry(1000, 1000, 10, 10);
      var floor = new THREE.Mesh(floorGeometry, floorMaterial);
      floor.position.y = -0.5;
      floor.rotation.x = Math.PI / 2;
      scene.add(floor);
      
      // FINGER
      var boneMaterial = new THREE.MeshBasicMaterial({color:0xe1d4c0})
      var phalanx3BoneGeometry = new THREE.CylinderGeometry(4, 4, 30, 8, 8, false);
      var phalanx3Bone = new THREE.Mesh(phalanx3BoneGeometry, boneMaterial);
      phalanx3Bone.position.y = 15;
      var phalanx3 = new THREE.Object3D();
      phalanx3.add(phalanx3Bone);
      phalanx3.position.y = 50;
      var phalanx2BoneGeometry = new THREE.CylinderGeometry(5, 5, 50, 8, 8, false);
      var phalanx2Bone = new THREE.Mesh(phalanx2BoneGeometry, boneMaterial);
      phalanx2Bone.position.y = 25;
      var phalanx2 = new THREE.Object3D();
      phalanx2.add(phalanx2Bone);
      phalanx2.add(phalanx3);
      phalanx2.position.y = 66;
      var phalanx1BoneGeometry = new THREE.CylinderGeometry(7, 7, 66, 8, 8, false);
      var phalanx1Bone = new THREE.Mesh(phalanx1BoneGeometry, boneMaterial);
      phalanx1Bone.position.y = 33;
      var phalanx1 = new THREE.Object3D();
      phalanx1.add(phalanx1Bone);
      phalanx1.add(phalanx2);
      phalanx1.position.y = 100;
      var metacarpalBoneGeometry = new THREE.CylinderGeometry(8, 8, 100, 8, 8, false);
      var metacarpalBone = new THREE.Mesh(metacarpalBoneGeometry, boneMaterial);
      metacarpalBone.position.y = 50;
      var metacarpal = new THREE.Object3D();
      metacarpal.add(metacarpalBone);
      metacarpal.add(phalanx1);
      metacarpal.position.y = 0;
      
      scene.add(metacarpal);
      
      // ANIMATION -- THE IMPORTANT PART
      // 
      THREE.Animatic.animate(phalanx3.rotation, {z: 1}, 5);
      THREE.Animatic.animate(phalanx2.rotation, {z: 0.5}, 5);
      THREE.Animatic.animate(phalanx1.rotation, {z: 0.6}, 5);
      
      // START THE REFRESH LOOP
      var f = function() {
          renderer.render(scene, camera); 
      }
      setInterval(f, 100);
    </script>

  </body>
</html>
